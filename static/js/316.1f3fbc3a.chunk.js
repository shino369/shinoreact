"use strict";(self.webpackChunkshinoreact=self.webpackChunkshinoreact||[]).push([[316],{54316:function(e,t,r){r.r(t),r.d(t,{ChatPage:function(){return v}});var s=r(74165),a=r(15861),n=r(70885),o=r(72791),c=r(59434),i=r(39478),l=r(9062),d=r(18643),u=r(80922),m=r(11792),h=r(55705),f=r(81724),p=r(80184),x=f.Ry().shape({msg:f.Z_().required("required")}),v=function(){var e=(0,c.I0)(),t=(0,c.v9)((function(e){return e.auth})).user,r=(0,o.useState)([]),f=(0,n.Z)(r,2);f[0],f[1];(0,o.useEffect)((function(){e((0,i.wC)("chat"))}),[e]);var v=(0,l.IO)((0,l.hJ)(d.db,"messages"),(0,l.Xo)("createdAt"),(0,l.b9)(100)),b=(0,u.sQ)(v),g=(0,o.useRef)(null);(0,o.useEffect)((function(){g.current.scrollTo(0,g.current.scrollHeight)}),[b]);var j=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(r,a){var n,o,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.msg,!((o=n.trim()).length>0)){e.next=8;break}return(0,l.hJ)(d.db,"messages"),c={uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,message:o,createdAt:l.EK.now()},e.next=7,(0,l.ET)((0,l.hJ)(d.db,"messages"),c);case 7:e.sent;case 8:a.resetForm();case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return(0,p.jsx)("div",{className:"d-flex justify-content-center chatroom-wrapper p-4",children:(0,p.jsxs)("div",{className:"chatroom rounded overflow-hidden shadow d-flex flex-column",children:[(0,p.jsx)("div",{className:"room-title border-bottom text-center py-3 shadow",children:"Realtime Chat Room"}),(0,p.jsx)("div",{ref:g,className:"room-content hideScroll",children:b.map((function(e,r){return(0,p.jsx)(m.z5,{name:e.displayName,message:e.message,self:(null===t||void 0===t?void 0:t.uid)===(null===e||void 0===e?void 0:e.uid),avatar:e.photoURL,uid:e.uid,createdAt:e.createdAt},r)}))}),(0,p.jsx)("div",{className:"border-top pt-3",children:(0,p.jsx)(h.J9,{initialValues:{msg:""},validationSchema:x,onSubmit:j,children:function(){return(0,p.jsxs)(h.l0,{className:"d-flex w-100 px-4",children:[(0,p.jsx)("div",{className:"col",children:(0,p.jsx)(m.UP,{style:{backgroundColor:"rgba(54, 57, 63, 0.8)",border:"none",caretColor:"white",color:"white"},name:"msg",placeholder:"Input something...",type:"text",showError:!1})}),(0,p.jsx)("div",{className:"",children:(0,p.jsx)("button",{className:"btn btn-primary btn-block",type:"submit",children:"SEND"})}),(0,p.jsx)("div",{className:"mt-4 text-center"})]})}})})]})})}}}]);
//# sourceMappingURL=316.1f3fbc3a.chunk.js.map